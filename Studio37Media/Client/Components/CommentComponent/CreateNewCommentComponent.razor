@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using Studio37Media.Shared.ViewModels


@using System.IO
@using BlazorInputFile
@using System.IO.MemoryMappedFiles


@attribute [Authorize]
@inject HttpClient Http

<EditForm Model="@newComment" OnValidSubmit="@HandleFormSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group row">
        <div class="col-sm-5">
            <InputTextArea id="CommentText" class="form-control" placeholder="Write Comment"
                       @bind-Value="newComment.text" />
        </div>
    </div>

    @*//date should be time created, not pick a date*@
    <div class="form-group row">
        <div class="col-sm-5">
            <InputDate id="DateCreated" class="form-control" placeholder="Date Created"
                       @bind-Value="newComment.Date" />
        </div>
    </div>

    <button class="btn btn-light" type="submit">Submit</button>
</EditForm>

@code {

    Comment newComment = new Comment();

    async void HandleFormSubmit()
    {

        // upload photos
        //await Http.PostAsync("FileUpload", ThumbnailContent);

        newComment.id = Guid.NewGuid();
        await Http.PostAsJsonAsync<Comment>("Comment/NewComment", newComment);
    }

    


}
